<!DOCTYPE html>
<html lang="dv" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>{{ _('title') }}</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='img/icon.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'Tharujamaanu';
            src: url('https://fonts.hassaanmv.com/fonts/merged-light.woff2') format('woff2'),
                 url('https://fonts.hassaanmv.com/fonts/merged-light.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Tharujamaanu';
            src: url('https://fonts.hassaanmv.com/fonts/merged-bold.woff2') format('woff2'),
                 url('https://fonts.hassaanmv.com/fonts/merged-bold.woff') format('woff');
            font-weight: bold;
            font-style: normal;
            font-display: swap;
        }
    </style>
</head>

<body>
    <div id="toast-container" class="toast-container"></div>

    <header class="app-header">
        <div class="container header-content">
            <h1 class="app-title">
                <img src="{{ url_for('static', filename='img/icon.svg') }}" alt="Logo" class="app-logo" width="32" height="32">
                {{ _('title') }}
            </h1>
            
            <div class="header-actions">
                <nav class="main-nav">
                    <ul>
                        <li><a href="{{ url_for('main.index') }}" class="nav-link active">{{ _('nav_home') }}</a></li>
                        <li><a href="{{ url_for('stats.stats') }}" class="nav-link">{{ _('nav_stats') }}</a></li>
                    </ul>
                </nav>

                <div class="controls-group">
                    <button id="theme-toggle" class="btn icon-btn" aria-label="Toggle Dark Mode" title="Toggle Dark Mode">
                         <span class="theme-icon light-icon" style="display: none;">‚òÄÔ∏è</span>
                         <span class="theme-icon dark-icon">üåô</span>
                    </button>

                    <div class="user-menu-wrapper">
                        <button id="user-menu-btn" class="btn text-btn user-btn">
                            <span id="current-username">{{ username }}</span>
                             <span class="icon">‚ñº</span>
                        </button>
                        <div id="user-menu-dropdown" class="dropdown-menu hidden">
                             <div class="dropdown-content">
                                <label for="username-select" class="dropdown-label">{{ _('select_user') }}</label>
                                <select id="username-select" class="form-select full-width">
                                    <option value="">{{ _('select_user') }}</option>
                                </select>
                                <input type="password" id="user-password" placeholder="{{ _('pin_password') }}" class="form-input full-width mt-2">
                                <button id="login-btn" class="btn primary full-width mt-2">{{ _('login') }}</button>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container main-content">
        <section class="translation-shell">
            <div class="hero-text">
                <h2>{{ _('main_header') }}</h2>
                <p>{{ _('main_subheader') }}</p>
            </div>

            <div class="input-area card">
                <div class="textarea-wrapper">
                    <textarea id="query-input" class="form-textarea" placeholder="{{ _('arabic_text_placeholder') }}"></textarea>
                    <div class="textarea-actions">
                         <button id="translate-btn" class="btn primary action-btn">{{ _('translate') }}</button>
                    </div>
                </div>
            </div>

            <div class="predefined-queries-section">
                 <details class="queries-details">
                    <summary class="queries-summary">{{ _('predefined_queries_header') }}</summary>
                     <div class="query-chips">
                        {% for query in predefined_queries %}
                        <button class="chip" data-query="{{ query }}">{{ query }}</button>
                        {% endfor %}
                    </div>
                 </details>
            </div>

            <div class="advanced-options">
                 <details class="options-details">
                    <summary class="options-summary">{{ _('configure_models') }}</summary>
                    <div class="options-content">
                        <h4>{{ _('select_models_prompt') }}</h4>
                        <div id="model-selection-checkboxes" class="model-grid">
                            <div class="loader-sm">{{ _('loading_models') }}</div>
                        </div>
                    </div>
                </details>
            </div>

            <div id="results-section" class="results-section hidden">
                <div class="results-header">
                    <h3>{{ _('results_header') }}</h3>
                     <div class="cost-badge" title="{{ _('total_cost_label') }}">
                        <span class="currency">$</span><span id="total-cost">0.000000</span>
                    </div>
                </div>

                <input type="hidden" id="query-id" value="">
                <div class="translations-grid"></div>

                <div class="voting-area">
                    <div id="vote-status" class="vote-status hidden"></div>
                    <button id="submit-votes-btn" class="btn primary lg-btn hidden">{{ _('submit_votes') }}</button>
                </div>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <div class="container">
            <p>&copy; 2025 {{ _('title') }}</p>
        </div>
    </footer>

    <!-- Templates -->
    <template id="translation-placeholder-template">
        <div class="translation-card placeholder" data-model-key="">
            <div class="card-header">
                <div class="model-badge skeleton-text"></div>
            </div>
            <div class="card-body">
                <div class="skeleton-line full"></div>
                <div class="skeleton-line three-quarter"></div>
                <div class="skeleton-line half"></div>
            </div>
        </div>
    </template>

    <template id="translation-card-content-template">
        <div class="card-header">
            <div class="model-info">
                 <span class="model-name-badge model"></span>
            </div>
        </div>
        <div class="card-body">
            <p class="translation-text"></p>
        </div>
        <div class="card-footer">
            <div class="rating-container">
                <input type="hidden" class="rating-value" value="0">
                <div class="stars">
                    <button class="star-btn" data-value="1" title="{{ _('rating_okay_title') }}">‚òÖ</button>
                    <button class="star-btn" data-value="2" title="{{ _('rating_good_title') }}">‚òÖ</button>
                    <button class="star-btn" data-value="3" title="{{ _('rating_excellent_title') }}">‚òÖ</button>
                </div>
                <button class="reject-btn icon-btn" title="{{ _('reject_translation_title') }}">
                    <span>‚úï</span>
                </button>
            </div>
        </div>
    </template>

    <template id="retry-button-template">
        <button class="btn secondary sm-btn retry-btn">
            <span>{{ _('retry') }}</span>
             <span class="icon">‚Ü∫</span>
        </button>
    </template>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>