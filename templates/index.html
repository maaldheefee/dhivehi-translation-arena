{% extends "base.html" %}

{% block title %}{{ _('title') }}{% endblock %}

{% block content %}
<section class="translation-shell">
    <div class="hero-text">
        <h2>{{ _('main_header') }}</h2>
        <p>{{ _('main_subheader') }}</p>
    </div>

    <div class="input-area card">
        <div class="textarea-wrapper">
            <textarea id="query-input" class="form-textarea" placeholder="{{ _('arabic_text_placeholder') }}"></textarea>
            <div class="textarea-actions">
                 <button id="translate-btn" class="btn primary action-btn">{{ _('translate') }}</button>
            </div>
        </div>
    </div>

    <div class="predefined-queries-section">
         <details class="queries-details">
            <summary class="queries-summary">{{ _('predefined_queries_header') }}</summary>
             <div class="query-chips">
                {% for query in predefined_queries %}
                <button class="chip" data-query="{{ query }}">{{ query }}</button>
                {% endfor %}
            </div>
         </details>
    </div>

    <div class="advanced-options">
         <details class="options-details">
            <summary class="options-summary">{{ _('configure_models') }}</summary>
            <div class="options-content">
                <h4>{{ _('select_models_prompt') }}</h4>
                <div id="model-selection-checkboxes" class="model-grid">
                    <div class="loader-sm">{{ _('loading_models') }}</div>
                </div>
            </div>
        </details>
    </div>

    <div id="results-section" class="results-section hidden">
        <div class="results-header">
            <h3>{{ _('results_header') }}</h3>
             <div class="cost-badge" title="{{ _('total_cost_label') }}">
                <span class="currency">$</span><span id="total-cost">0.000000</span>
            </div>
        </div>

        <input type="hidden" id="query-id" value="">
        <div class="translations-grid"></div>

        <div class="voting-area">
            <div id="vote-status" class="vote-status hidden"></div>
            <button id="submit-votes-btn" class="btn primary lg-btn hidden">{{ _('submit_votes') }}</button>
        </div>
    </div>
</section>

<!-- Templates -->
<template id="translation-placeholder-template">
    <div class="translation-card placeholder" data-model-key="">
        <div class="card-header">
            <div class="model-badge skeleton-text"></div>
        </div>
        <div class="card-body">
            <div class="skeleton-line full"></div>
            <div class="skeleton-line three-quarter"></div>
            <div class="skeleton-line half"></div>
        </div>
    </div>
</template>

<template id="translation-card-content-template">
    <div class="card-header">
        <div class="model-info">
             <span class="model-name-badge model"></span>
        </div>
    </div>
    <div class="card-body">
        <p class="translation-text"></p>
    </div>
    <div class="card-footer">
        <div class="rating-container">
            <input type="hidden" class="rating-value" value="0">
            <div class="stars">
                <button class="star-btn" data-value="1" title="{{ _('rating_okay_title') }}">★</button>
                <button class="star-btn" data-value="2" title="{{ _('rating_good_title') }}">★</button>
                <button class="star-btn" data-value="3" title="{{ _('rating_excellent_title') }}">★</button>
            </div>
            <button class="reject-btn icon-btn" title="{{ _('reject_translation_title') }}">
                <span>✕</span>
            </button>
        </div>
    </div>
</template>

<template id="retry-button-template">
    <button class="btn secondary sm-btn retry-btn">
        <span>{{ _('retry') }}</span>
         <span class="icon">↺</span>
    </button>
</template>
{% endblock %}

{% block scripts %}
<script>
    window.translations = {{ translations | tojson }};
</script>
{% endblock %}